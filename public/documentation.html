<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>myFlix API Documentation</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        margin: 0;
        padding: 20px;
        color: #333;
        max-width: 1200px;
        margin: auto;
      }
      h1,
      h2,
      h3 {
        color: #2c3e50;
      }
      h1 {
        border-bottom: 2px solid #3498db;
        padding-bottom: 10px;
      }
      h2 {
        margin-top: 30px;
        border-left: 4px solid #3498db;
        padding-left: 10px;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
      }
      th,
      td {
        border: 1px solid #ddd;
        padding: 12px;
        text-align: left;
      }
      th {
        background-color: #f2f2f2;
      }
      tr:nth-child(even) {
        background-color: #f9f9f9;
      }
      code {
        background-color: #f5f5f5;
        padding: 2px 5px;
        border-radius: 3px;
        font-family: monospace;
      }
      .method-get {
        color: #2ecc71;
      }
      .method-post {
        color: #3498db;
      }
      .method-put {
        color: #f39c12;
      }
      .method-delete {
        color: #e74c3c;
      }
      .endpoint {
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <h1>myFlix API Documentation</h1>

    <p>
      The myFlix API is a RESTful web service that provides access to
      information about movies, directors, and genres. Users can create
      accounts, update their personal information, and create lists of their
      favorite movies.
    </p>

    <h2>API Endpoints</h2>

    <h3>Movies</h3>

    <table>
      <thead>
        <tr>
          <th>Method</th>
          <th>Endpoint</th>
          <th>Description</th>
          <th>Request Format</th>
          <th>Response Format</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="method-get">GET</td>
          <td class="endpoint">/movies</td>
          <td>Returns a list of all movies</td>
          <td>None</td>
          <td>JSON array of movie objects</td>
        </tr>
        <tr>
          <td class="method-get">GET</td>
          <td class="endpoint">/movies/:title</td>
          <td>Returns data about a single movie by title</td>
          <td>None</td>
          <td>JSON movie object</td>
        </tr>
        <tr>
          <td class="method-get">GET</td>
          <td class="endpoint">/movies/:title/image</td>
          <td>Returns the image URL for a movie</td>
          <td>None</td>
          <td>JSON object with imageUrl property</td>
        </tr>
        <tr>
          <td class="method-get">GET</td>
          <td class="endpoint">/genres/:name</td>
          <td>Returns data about a genre by name</td>
          <td>None</td>
          <td>JSON array of movies in the genre</td>
        </tr>
        <tr>
          <td class="method-get">GET</td>
          <td class="endpoint">/directors/:name</td>
          <td>Returns data about a director by name</td>
          <td>None</td>
          <td>JSON director object</td>
        </tr>
      </tbody>
    </table>

    <h3>Users</h3>

    <table>
      <thead>
        <tr>
          <th>Method</th>
          <th>Endpoint</th>
          <th>Description</th>
          <th>Request Format</th>
          <th>Response Format</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="method-post">POST</td>
          <td class="endpoint">/users</td>
          <td>Allows new users to register</td>
          <td>JSON object with Username, Password, Email, Birthday</td>
          <td>JSON object with created user data</td>
        </tr>
        <tr>
          <td class="method-get">GET</td>
          <td class="endpoint">/users/:Username</td>
          <td>Returns user data by username</td>
          <td>None</td>
          <td>JSON user object</td>
        </tr>
        <tr>
          <td class="method-put">PUT</td>
          <td class="endpoint">/users/:Username</td>
          <td>Allows users to update their info</td>
          <td>
            JSON object with updated fields (Username, Password, Email,
            Birthday)
          </td>
          <td>JSON object with updated user data</td>
        </tr>
        <tr>
          <td class="method-post">POST</td>
          <td class="endpoint">/users/:Username/movies/:MovieID</td>
          <td>Adds a movie to user's favorites</td>
          <td>None</td>
          <td>JSON object with updated user data</td>
        </tr>
        <tr>
          <td class="method-delete">DELETE</td>
          <td class="endpoint">/users/:Username/movies/:MovieID</td>
          <td>Removes a movie from user's favorites</td>
          <td>None</td>
          <td>JSON object with updated user data</td>
        </tr>
        <tr>
          <td class="method-delete">DELETE</td>
          <td class="endpoint">/users/:Username</td>
          <td>Deletes a user by username</td>
          <td>None</td>
          <td>Text confirmation message</td>
        </tr>
      </tbody>
    </table>

    <h2>Example Requests</h2>

    <h3>Get All Movies</h3>
    <p><strong>Request:</strong></p>
    <code>GET /movies</code>

    <p><strong>Response:</strong></p>
    <pre>
[
    {
        "Title": "Inception",
        "Description": "A thief who steals corporate secrets...",
        "Genre": {
            "Name": "Sci-Fi",
            "Description": "Science fiction films..."
        },
        "Director": {
            "Name": "Christopher Nolan",
            "Bio": "Christopher Nolan is a British-American film director...",
            "Birth": "1970-07-30"
        },
        "ImagePath": "inception.jpg",
        "Featured": true
    },
    ...
]
    </pre>

    <h3>Register a New User</h3>
    <p><strong>Request:</strong></p>
    <code>POST /users</code>
    <pre>
{
    "Username": "johndoe",
    "Password": "securepassword123",
    "Email": "john@example.com",
    "Birthday": "1990-01-01"
}
    </pre>

    <p><strong>Response:</strong></p>
    <pre>
{
    "Username": "johndoe",
    "Password": "securepassword123",
    "Email": "john@example.com",
    "Birthday": "1990-01-01T00:00:00.000Z",
    "FavoriteMovies": [],
    "_id": "5f9d88a3c2b6a42a24aa1234",
    "__v": 0
}
    </pre>

    <h3>Add Movie to Favorites</h3>
    <p><strong>Request:</strong></p>
    <code>POST /users/johndoe/movies/5f9d88a3c2b6a42a24aa5678</code>

    <p><strong>Response:</strong></p>
    <pre>
{
    "Username": "johndoe",
    "Password": "securepassword123",
    "Email": "john@example.com",
    "Birthday": "1990-01-01T00:00:00.000Z",
    "FavoriteMovies": ["5f9d88a3c2b6a42a24aa5678"],
    "_id": "5f9d88a3c2b6a42a24aa1234",
    "__v": 0
}
    </pre>

    <h2>Technical Requirements</h2>
    <ul>
      <li>The API is a Node.js and Express application</li>
      <li>Uses MongoDB for data storage with Mongoose for object modeling</li>
      <li>
        Includes middleware:
        <ul>
          <li><code>morgan</code> for logging</li>
          <li><code>body-parser</code> for request body parsing</li>
        </ul>
      </li>
      <li>Responds with appropriate status codes and error messages</li>
      <li>Server runs on port 8080</li>
    </ul>

    <h2>Getting Started</h2>
    <ol>
      <li>Clone the repository</li>
      <li>Install dependencies: <code>npm install</code></li>
      <li>Ensure MongoDB is running locally on port 27017</li>
      <li>Start the server: <code>node index.js</code></li>
      <li>Access the API at <code>http://localhost:8080</code></li>
    </ol>

    <footer>
      <p>Â© 2023 myFlix API. All rights reserved.</p>
    </footer>
  </body>
</html>
